import{_ as a,o as n,c as i,a as s,t as l,f as e}from"./app-DRR1eIdY.js";const p={},r=e(`<h1 id="github-actions" tabindex="-1"><a class="header-anchor" href="#github-actions"><span>Github Actions</span></a></h1><h2 id="一、简介" tabindex="-1"><a class="header-anchor" href="#一、简介"><span>一、简介</span></a></h2><p>Github Actions 是 Github 平台提供的一项持续集成（CI）和持续部署（CD）服务。它允许开发者自定义自动化软件开发工作流程（工作流），例如构建、测试和部署代码。</p><p>下面介绍项目代码怎么集成 Github Actions 工作流</p><h2 id="二、配置" tabindex="-1"><a class="header-anchor" href="#二、配置"><span>二、配置</span></a></h2><p>在项目根目录创建<code>.github/workflows/deploy.yml</code>文件（文件名<code>deploy.yml</code>可随意）</p><ul><li>如果要将代码部署到自己的服务器，可以编写<code>vuepress-deploy.yml</code></li></ul><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="shiki shiki-themes github-light one-dark-pro" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">name</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">Build and Deploy</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;"># 监听 master 分支上的 push 事件</span></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#D19A66;">on</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">  push</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">    branches</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">      - </span><span style="color:#032F62;--shiki-dark:#98C379;">main</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">jobs</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">  build-and-deploy</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">    # 构建环境使用 ubuntu</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">    runs-on</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">ubuntu-latest</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">    steps</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">      # 官方action, 将代码拉取到虚拟机</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">      - </span><span style="color:#22863A;--shiki-dark:#E06C75;">name</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">Checkout</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">        uses</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">actions/checkout@v3</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">        with</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">          persist-credentials</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#005CC5;--shiki-dark:#D19A66;">false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">      # 安装node.js</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">      - </span><span style="color:#22863A;--shiki-dark:#E06C75;">name</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">Use Node.js</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">        uses</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">actions/setup-node@v3</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">        with</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">          node-version</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">&quot;16&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">      # 下载依赖、打包项目</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">      - </span><span style="color:#22863A;--shiki-dark:#E06C75;">name</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">Install and Build</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">        run</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#D73A49;--shiki-dark:#C678DD;">|</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">          yarn install</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#98C379;">          yarn docs:build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">      # 部署到服务器</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">      - </span><span style="color:#22863A;--shiki-dark:#E06C75;">name</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">Upload to Deploy Server</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">        uses</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">appleboy/scp-action@master</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">        with</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">          # 服务器域名</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">          host</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">\${{ secrets.HOST }}</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">          # 服务器用户名</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">          username</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">\${{ secrets.USERNAME }}</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">          # 服务器密码</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">          password</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">\${{ secrets.PASSWORD }}</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">          # 服务器端口</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">          port</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">\${{ secrets.PORT }}</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">          # 指定上传的文件目录(项目配置的打包目录名称)</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">          source</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">&#39;.vuepress/dist/*&#39;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">          # 指定上传服务器目录</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">          target</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">&#39;/yangwenjin-blogs&#39;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">          # 解压时覆盖现有文件</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">          overwrite</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#005CC5;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#7F848E;font-style:inherit;--shiki-dark-font-style:italic;">          # 删除指定数量的前导路径元素</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">          strip_components</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#005CC5;--shiki-dark:#D19A66;">1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面配置会将本地仓库代码打包生成后的<code>.vuepress/dist/*</code>通过 ssh 上传到目标服务器的 <code>/yangwenjin-blogs</code>目录，最后在服务器生成的目录为<code>/yangwenjin-blogs/dist/*</code></p><ul><li>如果要将代码部署到github-pages，可以配置</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="shiki shiki-themes github-light one-dark-pro" style="background-color:#fff;--shiki-dark-bg:#282c34;color:#24292e;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">name</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">Deploy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#D19A66;">on</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">    push</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">        branches</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">            - </span><span style="color:#032F62;--shiki-dark:#98C379;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">jobs</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">    deploy</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">        runs-on</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">ubuntu-latest</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">        steps</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">            - </span><span style="color:#22863A;--shiki-dark:#E06C75;">uses</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">actions/checkout@v2</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">            - </span><span style="color:#22863A;--shiki-dark:#E06C75;">uses</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">actions/setup-node@v3</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">              with</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">                  node-version</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#005CC5;--shiki-dark:#D19A66;">16</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">                  cache</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">npm</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">            - </span><span style="color:#22863A;--shiki-dark:#E06C75;">run</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">npm install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">            - </span><span style="color:#22863A;--shiki-dark:#E06C75;">name</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">Build</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">              run</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">npm run docs:build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#ABB2BF;">            - </span><span style="color:#22863A;--shiki-dark:#E06C75;">name</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">Deploy to GitHub Pages</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">              uses</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">crazy-max/ghaction-github-pages@v2</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">              with</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">                  target_branch</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">gh-pages</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">                  build_dir</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">src/.vuepress/dist</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">              env</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#E06C75;">                  GITHUB_TOKEN</span><span style="color:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="color:#032F62;--shiki-dark:#98C379;">\${{ secrets.SEC }}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11),o=s("figure",null,[s("img",{src:"https://smallsheep-assets.oss-cn-guangzhou.aliyuncs.com/assets/202405131946160.png",alt:"image-20240513194647464",tabindex:"0",loading:"lazy"}),s("figcaption",null,"image-20240513194647464")],-1);function t(c,d){return n(),i("div",null,[r,s("blockquote",null,[s("p",null,"使用 $"+l()+"定义的变量需要在 github 仓库的 Settings - Secrets and Variables - Actions 的 Repository secrets 创建对应的值",1)]),o])}const h=a(p,[["render",t],["__file","github-actions.html.vue"]]),y=JSON.parse('{"path":"/tools-and-deploy/cicd/tools/github-actions.html","title":"Github Actions","lang":"zh-CN","frontmatter":{"description":"Github Actions 一、简介 Github Actions 是 Github 平台提供的一项持续集成（CI）和持续部署（CD）服务。它允许开发者自定义自动化软件开发工作流程（工作流），例如构建、测试和部署代码。 下面介绍项目代码怎么集成 Github Actions 工作流 二、配置 在项目根目录创建.github/workflows/dep...","head":[["meta",{"property":"og:url","content":"http://113.45.177.232/tools-and-deploy/cicd/tools/github-actions.html"}],["meta",{"property":"og:site_name","content":"SmallSheep"}],["meta",{"property":"og:title","content":"Github Actions"}],["meta",{"property":"og:description","content":"Github Actions 一、简介 Github Actions 是 Github 平台提供的一项持续集成（CI）和持续部署（CD）服务。它允许开发者自定义自动化软件开发工作流程（工作流），例如构建、测试和部署代码。 下面介绍项目代码怎么集成 Github Actions 工作流 二、配置 在项目根目录创建.github/workflows/dep..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://smallsheep-assets.oss-cn-guangzhou.aliyuncs.com/assets/202405131946160.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-13T11:49:30.000Z"}],["meta",{"property":"article:author","content":"SmallSheep"}],["meta",{"property":"article:modified_time","content":"2024-05-13T11:49:30.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Github Actions\\",\\"image\\":[\\"https://smallsheep-assets.oss-cn-guangzhou.aliyuncs.com/assets/202405131946160.png\\"],\\"dateModified\\":\\"2024-05-13T11:49:30.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"SmallSheep\\",\\"url\\":\\"http://113.45.177.232/\\",\\"email\\":\\"1757821361@qq.com\\"}]}"]]},"headers":[{"level":2,"title":"一、简介","slug":"一、简介","link":"#一、简介","children":[]},{"level":2,"title":"二、配置","slug":"二、配置","link":"#二、配置","children":[]}],"git":{"createdTime":1715600970000,"updatedTime":1715600970000,"contributors":[{"name":"yangwenjinIter","email":"1757821361@qq.com","commits":1}]},"readingTime":{"minutes":1.55,"words":465},"filePathRelative":"tools-and-deploy/cicd/tools/github-actions.md","localizedDate":"2024年5月13日","excerpt":"\\n<h2>一、简介</h2>\\n<p>Github Actions 是 Github 平台提供的一项持续集成（CI）和持续部署（CD）服务。它允许开发者自定义自动化软件开发工作流程（工作流），例如构建、测试和部署代码。</p>\\n<p>下面介绍项目代码怎么集成  Github Actions  工作流</p>\\n<h2>二、配置</h2>\\n<p>在项目根目录创建<code>.github/workflows/deploy.yml</code>文件（文件名<code>deploy.yml</code>可随意）</p>\\n<ul>\\n<li>如果要将代码部署到自己的服务器，可以编写<code>vuepress-deploy.yml</code></li>\\n</ul>","autoDesc":true}');export{h as comp,y as data};
